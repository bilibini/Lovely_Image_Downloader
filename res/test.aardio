import win.ui;
import web.view;
import electron.app;



var creaWeb=function(strr){
	import win.ui;
	import web.view;
	var winform = win.form(text="aardio工程22")
	var web=web.view(winform);
	web.html=/**
<html>
<head>
    <meta charset="UTF-8">
    <title>测试</title>
</head>
<body>
	<h1>这个窗口只有在electron.app()创建的对象以外调用才能创建出来，不知道为什么，求大佬解疑，感谢∠( °ω°)／</h1>
    <script type="text/javascript">
        const aardio = require('aardio');
		const app = require('electron').app;
        function onclickImg(strr){
            aardio.down(strr);
        }
        function addDom(strr){
            var box=`<h1>${strr}</h1><div><button onclick="onclickImg('${strr}')">打开弹窗</button></div>`;
            document.body.insertAdjacentHTML("beforeend",box);
        }
        aardio.getstrr().then((strr)=>{addDom(strr)});
    </script>
</body>
</html>
		**/
	web.external = {
        down = function(strr) {
            win.msgbox(strr);
        }
        getstrr=function() {
            return strr; 
        }
    }
    winform.show();
	return win.loopMessage();
}





var creaLook=function(strr) {
		import win;
		import electron.app;
    	lookimg = electron.app(,,false);
		lookimg.html=/**
<html>
<head>
    <meta charset="UTF-8">
    <title>测试</title>
</head>
<body>
	<h1>这个窗口只有在electron.app()创建的对象以外调用才能创建出来，不知道为什么，求大佬解疑，感谢∠( °ω°)／</h1>
    <script type="text/javascript">
        const aardio = require('aardio');
		const app = require('electron').app;
        function onclickImg(strr){
            aardio.down(strr);
        }
        function addDom(strr){
            var box=`<h1>${strr}</h1><div><button onclick="onclickImg('${strr}')">打开弹窗</button></div>`;
            document.body.insertAdjacentHTML("beforeend",box);
        }
        aardio.getstrr().then((strr)=>{addDom(strr)});
    </script>
</body>
</html>
		**/
    	lookimg.external = {
        	down = function(strr) {
            	win.msgbox(strr);
        	}
        	getstrr=function() {
            	return strr; 
        	}
    	}
    	lookimg.start(
        	indexUrl = "/res/look.aardio"; 
        	browserWindow = {
            	frame = true;
        	}
    	);
    	win.loopMessage();
    	return '成功'; 
 	}


var theApp = electron.app();
theApp.html=/**
<html>
<head>
    <meta charset="UTF-8">
    <title>测试主窗口</title>
</head>
<body>
	<button onclick="onclickImg('aaabbb')">创建新的electron窗口</button>
    <script type="text/javascript">
        const aardio = require('aardio');
    	const app = require('electron').app;
        function onclickImg(strr){
            aardio.look(strr).then((a)=>{alert(a);});
        }
    </script>
</body>
</html>

**/


theApp.external = {
	look = function(strr){
		creaWeb('abc')
		return 'abbc';
	}

}

theApp.start(
    indexUrl = "/res/index.aardio";
    browserWindow = {
        frame = true;
    }
);
//elec().creaLook('aaaa');
//theApp.external.look('abcdef');
//creaLook('aaa');//创建新的electron窗口，在electron中调用无反应

//creaWeb('abc');
win.loopMessage();